<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>To Do List</title>
    <link rel="icon" type="image/x-icon" href="favicon.png" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <style>
      .fa {
        padding: 5px;
        font-size: 25px;
        text-decoration: none;
        margin-left: 8px;
      }

      .fa:hover {
        color: white;
        font-size: 32px;
        filter: blur(2px);
      }
      .fa-instagram {
        background: #eea04e;
        background: -webkit-linear-gradient(
          45deg,
          #f09433 0%,
          #e6683c 25%,
          #dc2743 50%,
          #cc2366 75%,
          #bc1888 100%
        );
        background: linear-gradient(
          45deg,
          #f09433 0%,
          #e6683c 25%,
          #dc2743 50%,
          #cc2366 75%,
          #bc1888 100%
        );
        color: white;
      }
      .fa-linkedin {
        background-color: #0a66c2;
        color: white;
      }
    </style>
  </head>

  <!-- ===================================== -->
  <body>
    <!--================= Navbar ================-->

    <nav class="navbar bg-light">
      <div class="container-fluid">
        <a
          class="navbar-brand bg-success rounded p-2 px-3"
          href="http://index.html"
        >
          <h2>Timeliner</h2>
        </a>
        <div class="d-flex">
          <span
            class="p-2 mx-3 fw-bold fs-4 bg-dark text-danger rounded p-2"
            id="txt"
          ></span>
        </div>
      </div>
    </nav>

    <!-- ============== Now Focus on Making To DO List ==================== -->

    <div class="container mb-5">
      <h2 class="text-center text-success my-2 p-2 rounded" id="mainHeading">
        To Do List<br />
      </h2>
      <div class="container px-5">
        <div class="mb-3">
          <label for="title" class="form-label">Note Title</label>
          <input type="text" class="form-control" id="title" />
        </div>
        <label for="description" class="form-label">Description :</label>
        <div class="form-floating">
          <textarea class="form-control" id="description" style="height: 100px">
          </textarea>
        </div>
        <button type="submit" id="add" class="btn btn-primary my-2">
          Add to list
        </button>
      </div>
    </div>
    <!--=========== To show the List of task  =====================-->
    <div id="items" class="my-2 container">
      <h2>Your To do list</h2>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Sno.</th>
            <th scope="col">Title</th>
            <th scope="col">Description</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody id="tableBody">
          <tr>
            <th scope="row">1</th>
            <td>ðŸ˜‰</td>
            <td>Be Kind To Everyone</td>
            <td>
              <button class="btn btn-md btn-primary" id="deleteNote">
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- ============== Footer ================== -->

    <footer id="footer">
      <div class="container text-center bg-dark text-light pt-3 mt-5 rounded">
        <p>Thanks for visiting and using my webapp.</p>
        <p>
          Created by
          <a
            class="text-success text-decoration-none"
            href="https://github.com/BhushanVnit"
            target="â€_blankâ€"
            >Bhushan Bahale</a
          >
        </p>

        <!--================== Social media logos =========================== -->
        <div class="container pb-2">
          <span>
            <a
              href="https://www.instagram.com/bhushan_bahale/"
              target="â€_blankâ€"
              class="fa fa-instagram rounded"
            ></a>
            <a
              href="https://www.linkedin.com/in/bhushan-bahale/"
              target="â€_blankâ€"
              class="fa fa-linkedin rounded"
            ></a>
          </span>
        </div>
      </div>
    </footer>

    <!--=================== Scripts from Bootstrap ==================== -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
      integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js"
      integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy"
      crossorigin="anonymous"
    ></script>

    <!-- ==================== Script for timer ================= -->
    <script>
      setInterval(function () {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        var s = today.getSeconds();
        let time = document.getElementById("txt");
        if (h > 12) {
          h -= 12;
          s += " pm";
        } else {
          s += " am";
        }
        time.innerHTML = h + ":" + m + ":" + s;
      }, 1000);
    </script>

    <!--======================== Script for date in main heading ====================== -->

    <script>
      let date = new Date();
      document.getElementById("mainHeading").innerText += date.toDateString();
    </script>

    <!--================= My script for adding items to list===============  -->

    <script>
      //   Empty the title and description fields function javascript
      updateBox = () => {
        console.log("updateBox called");
        document.querySelector("#title").value = "";
        document.getElementById("description").value = "";
      };

      // Javascript for add button functionality

      let submit = document.getElementById("add");

      submit.addEventListener("click", () => {
        console.log("add to list button is clicked");

        let tittle = document.querySelector("#title").value;
        let desc = document.getElementById("description").value;

        if (localStorage.getItem("itemsJson") === null) {
          itemsArray = [];
          itemsArray.push([tittle, desc]);
          localStorage.setItem("itemsJson", JSON.stringify(itemsArray));
        } else {
          itemsArraystr = localStorage.getItem("itemsJson");
          itemsArray = JSON.parse(itemsArraystr);
          itemsArray.push([tittle, desc]);
          localStorage.setItem("itemsJson", JSON.stringify(itemsArray));
        }

        // Now inserting to the table

        let table = document.getElementById("tableBody");
        let str = "";
        itemsArray.forEach((element, index) => {
          str += `
                    <tr>
                    <th scope="row">${index + 1}</th>
                    <td>${element[0]}</td>
                    <td>${element[1]}</td>
                    <td><button class="btn btn-md btn-primary" id="deleteNote" onclick="deleteNote(${index})">Delete</button></td>
                    </tr> `;
        });
        table.innerHTML = str;
        updateBox();
      });

      //================== Function to automatically fetch data to the table on loading and after each activity.================

      function update() {
        let table = document.getElementById("tableBody");
        itemsArraystr = localStorage.getItem("itemsJson");
        itemsArray = JSON.parse(itemsArraystr);
        let str = "";
        if (itemsArray == null) {
          table.innerHTML = str;
        } else {
          itemsArray.forEach((element, index) => {
            str += `
                    <tr>
                    <th scope="row">${index + 1}</th>
                    <td>${element[0]}</td>
                    <td>${element[1]}</td>
                    <td><button class="btn btn-md btn-primary" id="deleteNote" onclick="deleteNote(${index})">Delete</button></td>
                    </tr> `;
          });
          table.innerHTML = str;
        }
      }
      // for updating list just after opening page.
      update();

      //   Delete button javascript
      deleteNote = (index) => {
        console.log("delete button clicked");
        itemsArraystr = localStorage.getItem("itemsJson");
        itemsArray = JSON.parse(itemsArraystr);
        itemsArray.splice(index, 1);
        localStorage.setItem("itemsJson", JSON.stringify(itemsArray));
        update();
      };
    </script>
  </body>
</html>
